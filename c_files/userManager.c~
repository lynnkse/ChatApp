#include "../inc/internal.h"
#include "../inc/userManager.h"
#include "../inc/client.h"
#include <errno.h>
#include <stdlib.h>
#include <stdio.h>

#define NDEBUG

#define CONFIG_FILE config.txt

/*-------Static Funcs Declarations-----*/

static ConfigStruct* ReadConfigFile();

/*-----------------MAIN----------------*/

int main()
{
	ConfigStruct* configStruct = NULL;
	SocketDesc socketDesc = 0;
	
	configStruct = ReadConfigFile();
	
	printf("%p\n", (void*)configStruct);/*TODO delete this*/
	
	if((socketDesc = InitializeConnectionWithTCPserver()) == 0)
	{
		/*TODO logger*/
		#ifndef NDEBUG
			perror("Connection with TCP server failed\n");
		#endif
		return 1;
	}
	
	
	
	return 0;
}

/*-----------Static functions----------*/

ConfigStruct* ReadConfigFile()
{
	ConfigStruct* configStruct;
	
	configStruct = (ConfigStruct*) malloc(sizeof(ConfigStruct));
	if(NULL == configStruct)
	{
		/*TODO logger*/
		#ifndef NDEBUG
			perror("Malloc failed\n");
		#endif
		return NULL;
	}
	
	/*hardcoded*/
	configStruct->m_IPaddress = "127.0.0.1";
	configStruct->m_port = 8888;
	/*---------*/
	
	return configStruct;
}

























